{"ast":null,"code":"import config from './config';\nimport axios from 'axios';\n\nvar qs = require('qs');\n\nconst serverUrl = config.baseUrl;\nif (false) if (window.localStorage.getItem('token') !== null) {\n  axios.defaults.headers.common['Authorization'] = localStorage.getItem('token_type') + ' ' + localStorage.getItem('token');\n  axios.defaults.headers.common['Content-Type'] = 'application/x-www-form-urlencoded';\n}\nconst Network = {\n  getToken: async () => {\n    return new Promise((resolve, reject) => {\n      var data = qs.stringify({\n        grant_type: 'client_credentials'\n      });\n      axios({\n        url: serverUrl + config.auth,\n        method: 'post',\n        data: data,\n        headers: {\n          'Content-Type': 'application/x-www-form-urlencoded',\n          Authorization: 'Basic ' + btoa('mobile:pin')\n        }\n      }).then(data => {\n        console.log('data', data.data);\n        const authData = data.data;\n        localStorage.setItem('token', authData.access_token);\n        localStorage.setItem('token_type', authData.token_type);\n        axios.defaults.headers.common['Authorization'] = localStorage.getItem('token_type') + ' ' + localStorage.getItem('token');\n        axios.defaults.headers.common['Content-Type'] = 'application/x-www-form-urlencoded';\n        return resolve(data); // localStorage.setItem()\n      }).catch(err => reject(err));\n    });\n  },\n  dashboardData: async () => {\n    return new Promise((resolve, reject) => {\n      if (window.localStorage.getItem('longitude') == null) {\n        navigator.geolocation.getCurrentPosition(function (position) {\n          localStorage.setItem('latitude', position.coords.latitude);\n          localStorage.setItem('longitude', position.coords.longitude);\n          console.log(\"Latitude is :\", localStorage.getItem('latitude'));\n          console.log(\"Longitude is :\", localStorage.getItem('longitude'));\n        });\n      }\n\n      var data = {\n        channelId: 2,\n        customerId: 1,\n        language: 'ENG',\n        userId: 2,\n        latitude: localStorage.getItem('latitude'),\n        longitude: localStorage.getItem('longitude'),\n        storeId: 1\n      };\n      axios({\n        url: serverUrl + config.dashboardData,\n        method: 'post',\n        data: data,\n        headers: {\n          'Authorization': 'Bearer ' + localStorage.getItem('token') + '',\n          'Content-Type': 'application/json'\n        }\n      }).then(data => {\n        resolve(data);\n      }).catch(err => reject(err));\n    });\n  },\n  productDetails: async pid => {\n    return new Promise((resolve, reject) => {\n      if (window.localStorage.getItem('longitude') == null) {\n        navigator.geolocation.getCurrentPosition(function (position) {\n          localStorage.setItem('latitude', position.coords.latitude);\n          localStorage.setItem('longitude', position.coords.longitude);\n          console.log(\"Latitude is :\", localStorage.getItem('latitude'));\n          console.log(\"Longitude is :\", localStorage.getItem('longitude'));\n        });\n      }\n\n      var data = {\n        channelId: 2,\n        customerId: 1,\n        language: 'ENG',\n        userId: 2,\n        storeId: 1\n      };\n      axios({\n        url: serverUrl + config.productDetails + '?CustomerID=1&StoreID=1&LanguageCode=ENG&ProductID=' + pid + '&ChannelID=2',\n        method: 'post',\n        data: data,\n        headers: {\n          'Authorization': 'Bearer ' + localStorage.getItem('token') + '',\n          'Content-Type': 'application/json'\n        }\n      }).then(data => {\n        resolve(data);\n      }).catch(err => reject(err));\n    });\n  },\n  saveUserAddress: async postvar => {\n    return new Promise((resolve, reject) => {\n      if (window.localStorage.getItem('longitude') == null) {\n        navigator.geolocation.getCurrentPosition(function (position) {\n          localStorage.setItem('latitude', position.coords.latitude);\n          localStorage.setItem('longitude', position.coords.longitude);\n          console.log(\"Latitude is :\", localStorage.getItem('latitude'));\n          console.log(\"Longitude is :\", localStorage.getItem('longitude'));\n        });\n      }\n\n      console.log(\"post:\", postvar);\n      var data = {\n        address: postvar.address,\n        addressType: postvar.type,\n        city: postvar.city,\n        country: \"India\",\n        entryUserId: 2,\n        latitude: postvar.markerPosition.lat,\n        longitude: postvar.markerPosition.lng,\n        pinCode: postvar.pinCode,\n        state: postvar.state,\n        userId: 2\n      };\n      axios({\n        url: serverUrl + config.saveUserAddress,\n        method: 'post',\n        data: data,\n        headers: {\n          'Authorization': 'Bearer ' + localStorage.getItem('token') + '',\n          'Content-Type': 'application/json'\n        }\n      }).then(data => {\n        resolve(data);\n      }).catch(err => reject(err));\n    });\n  },\n  generateOTP: async postvar => {\n    return new Promise((resolve, reject) => {\n      if (window.localStorage.getItem('longitude') == null) {\n        navigator.geolocation.getCurrentPosition(function (position) {\n          localStorage.setItem('latitude', position.coords.latitude);\n          localStorage.setItem('longitude', position.coords.longitude);\n          console.log(\"Latitude is :\", localStorage.getItem('latitude'));\n          console.log(\"Longitude is :\", localStorage.getItem('longitude'));\n        });\n      }\n\n      console.log(\"post:\", postvar);\n      var data = {\n        customerID: 1,\n        hashKEY: \"KJYT1324\",\n        phoneNo: postvar.username\n      };\n      axios({\n        url: serverUrl + config.generateOTP,\n        method: 'post',\n        data: data,\n        headers: {\n          'Authorization': 'Bearer ' + localStorage.getItem('token') + '',\n          'Content-Type': 'application/json'\n        }\n      }).then(data => {\n        resolve(data);\n      }).catch(err => reject(err));\n    });\n  },\n  validateOTP: async postvar => {\n    return new Promise((resolve, reject) => {\n      if (window.localStorage.getItem('longitude') == null) {\n        navigator.geolocation.getCurrentPosition(function (position) {\n          localStorage.setItem('latitude', position.coords.latitude);\n          localStorage.setItem('longitude', position.coords.longitude);\n          console.log(\"Latitude is :\", localStorage.getItem('latitude'));\n          console.log(\"Longitude is :\", localStorage.getItem('longitude'));\n        });\n      }\n\n      console.log(\"post:\", postvar);\n      var data = {\n        customerID: 1,\n        deviceID: \"HJGGT5678\",\n        mobileNo: postvar.phonenumber,\n        otp: postvar.otp,\n        pushID: \"8766GHFFDD\",\n        userFullName: postvar.username\n      };\n      axios({\n        url: serverUrl + config.validateOTP,\n        method: 'post',\n        data: data,\n        headers: {\n          'Authorization': 'Bearer ' + localStorage.getItem('token') + '',\n          'Content-Type': 'application/json'\n        }\n      }).then(data => {\n        resolve(data);\n      }).catch(err => reject(err));\n    });\n  }\n};\nexport default Network;","map":null,"metadata":{},"sourceType":"module"}
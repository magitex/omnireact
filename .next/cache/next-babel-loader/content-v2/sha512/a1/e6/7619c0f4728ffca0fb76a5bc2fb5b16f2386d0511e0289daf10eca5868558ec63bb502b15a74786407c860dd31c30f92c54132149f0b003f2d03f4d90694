{"ast":null,"code":"import config from './config';\nimport axios from 'axios';\n\nvar qs = require('qs');\n\nconst serverUrl = config.baseUrl;\nif (false) if (window.localStorage.getItem('token') !== null) {\n  axios.defaults.headers.common['Authorization'] = localStorage.getItem('token_type') + ' ' + localStorage.getItem('token');\n  axios.defaults.headers.common['Content-Type'] = 'application/x-www-form-urlencoded';\n}\nconst Network = {\n  getToken: async () => {\n    return new Promise((resolve, reject) => {\n      var data = qs.stringify({\n        grant_type: 'client_credentials'\n      });\n      axios({\n        url: serverUrl + config.auth,\n        method: 'post',\n        data: data,\n        headers: {\n          'Content-Type': 'application/x-www-form-urlencoded',\n          Authorization: 'Basic ' + btoa('mobile:pin')\n        }\n      }).then(data => {\n        console.log('data', data.data);\n        const authData = data.data;\n        localStorage.setItem('token', authData.access_token);\n        localStorage.setItem('token_type', authData.token_type);\n        axios.defaults.headers.common['Authorization'] = localStorage.getItem('token_type') + ' ' + localStorage.getItem('token');\n        axios.defaults.headers.common['Content-Type'] = 'application/x-www-form-urlencoded';\n        return resolve(data); // localStorage.setItem()\n      }).catch(err => reject(err));\n    });\n  },\n  dashboardData: async () => {\n    return new Promise((resolve, reject) => {\n      navigator.geolocation.getCurrentPosition(function (position) {\n        localStorage.setItem('latitude', position.coords.latitude);\n        localStorage.setItem('longitude', position.coords.longitude);\n        console.log(\"Latitude is :\", localStorage.getItem('latitude'));\n        console.log(\"Longitude is :\", localStorage.getItem('longitude'));\n      });\n      var data = {\n        channelId: 1,\n        customerId: 1,\n        language: 'ENG',\n        userId: 2,\n        latitude: localStorage.getItem('latitude'),\n        longitude: localStorage.getItem('longitude'),\n        storeId: 1\n      };\n      axios({\n        url: serverUrl + config.dashboardData,\n        method: 'post',\n        data: data,\n        headers: {\n          'Authorization': 'Bearer ' + localStorage.getItem('token') + '',\n          'Content-Type': 'application/json'\n        }\n      }).then(data => {\n        resolve(data);\n      }).catch(err => reject(err));\n    });\n  }\n};\nexport default Network;","map":null,"metadata":{},"sourceType":"module"}